(function(t){function e(e){for(var n,r,o=e[0],c=e[1],u=e[2],l=0,f=[];l<o.length;l++)r=o[l],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&f.push(s[r][0]),s[r]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);h&&h(e);while(f.length)f.shift()();return a.push.apply(a,u||[]),i()}function i(){for(var t,e=0;e<a.length;e++){for(var i=a[e],n=!0,o=1;o<i.length;o++){var c=i[o];0!==s[c]&&(n=!1)}n&&(a.splice(e--,1),t=r(r.s=i[0]))}return t}var n={},s={app:0},a=[];function r(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=t,r.c=n,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(i,n,function(e){return t[e]}.bind(null,n));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/web-firework-simulation/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var u=0;u<o.length;u++)e(o[u]);var h=c;a.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"034f":function(t,e,i){"use strict";var n=i("64a9"),s=i.n(n);s.a},1794:function(t,e,i){},"56d7":function(t,e,i){"use strict";i.r(e);i("cadf"),i("551c"),i("f751"),i("097d");var n=i("2b0e"),s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("night-sky",{attrs:{coefficients:t.coefficients}}),i("control-panel",{attrs:{coefficients:t.coefficients},on:{"change-coef":t.handleChangeCoef,"reset-coef":t.handleResetCoef}})],1)},a=[],r=(i("8e6e"),i("ac6a"),i("456d"),i("bd86")),o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"canvas-container"},[i("canvas",{ref:"night-sky-canvas",on:{mousemove:t.handleMouseMove,click:t.handleMouseClick}},[t._v("\n    Not support canvas\n  ")])])},c=[],u=i("d225"),h=i("b0b4"),l=function(){function t(e,i){Object(u["a"])(this,t),this.x=e,this.y=i}return Object(h["a"])(t,[{key:"valueOf",value:function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))}},{key:"toString",value:function(){return"(".concat(this.x,", ").concat(this.y,")")}},{key:"clone",value:function(){return Object.assign(Object.create(Object.getPrototypeOf(this)),this)}},{key:"move",value:function(t){return this.x+=t.x,this.y+=t.y,this}},{key:"bias",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,e=Math.random()*t-t,i=Math.random()*t-t;return this.x+=e,this.y+=i,this}},{key:"assign",set:function(t){this.x=t.x,this.y=t.y}}],[{key:"distance",value:function(t,e){var i=t.x-e.x,n=t.y-e.y;return Math.sqrt(Math.pow(i,2)+Math.pow(n,2))}}]),t}(),f=l,p=i("308d"),v=i("6bb5"),d=i("4e2b"),m=function(t){function e(){return Object(u["a"])(this,e),Object(p["a"])(this,Object(v["a"])(e).apply(this,arguments))}return Object(d["a"])(e,t),Object(h["a"])(e,[{key:"add",value:function(t){return this.x+=t.x,this.y+=t.y,this}},{key:"scale",value:function(t){return this.x*=t,this.y*=t,this}},{key:"length",get:function(){return this.valueOf()}}],[{key:"fromPCS",value:function(t,i){var n=Math.PI*(i/180),s=t*Math.cos(n),a=t*Math.sin(n);return new e(s,a)}},{key:"fromOffset",value:function(t,i,n){var s=Math.atan2(n,i);return new e(t*Math.cos(s),t*Math.sin(s))}}]),e}(f),y=m,g=function(){function t(e,i,n,s){Object(u["a"])(this,t),this.oldPos=new f(e.x,e.y),this.pos=new f(e.x,e.y),this.vel=new y(i.x,i.y),this.acc=new y(n.x,n.y),this.radius=s,this.hue=Math.floor(360*Math.random()),this.saturation=100,this.lightness=50,this.alpha=.5}return Object(h["a"])(t,[{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.oldPos=this.pos.clone(),this.pos.move(this.vel.clone().scale(t)),this.vel.add(this.acc.clone().scale(t)),this.hue=(this.hue+10)%360}},{key:"draw",value:function(t){t.beginPath(),t.moveTo(this.oldPos.x,this.oldPos.y),t.lineTo(this.pos.x,this.pos.y),t.strokeStyle="hsla(".concat(this.hue,", ").concat(this.saturation,"%, ").concat(this.lightness,"%, ").concat(this.alpha,")"),t.lineWidth=this.radius,t.stroke()}}]),t}(),b=g;function w(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Math.floor(Math.random()*(t-e)+e)}var O=function(){function t(e,i,n){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:40;Object(u["a"])(this,t),this.particles=[],this.isExplode=!1,this.isDiscard=!1,this.emitTime=new Date,this.gravity=n,this.fragNum=s,this.emitVel=i.clone(),this.emitPos=e.clone(),this.particles.push(new b(this.emitPos,this.emitVel,n.clone(),3))}return Object(h["a"])(t,[{key:"draw",value:function(t){this.particles.forEach((function(e){e.draw(t)}))}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=new Date;if(!this.isExplode&&(this.particles[0].vel.y>0||e-this.emitTime>1500)){var i=this.particles[0].pos.clone();this.isExplode=!0,this.particles=[];for(var n=0;n<this.fragNum;n+=1){var s=y.fromPCS(w(this.emitVel.valueOf()-15,this.emitVel.valueOf()-30),w(0,360)),a=new b(i,s,this.gravity,2);this.particles.push(a)}}this.isExplode&&e-this.emitTime>5e3&&(this.isDiscard=!0,this.particles=[]),this.particles.forEach((function(e){e.update(t)}))}}]),t}(),x=O,k=function(){function t(e,i){Object(u["a"])(this,t),this.pos=e.clone(),this.angle=-90,this.size=i}return Object(h["a"])(t,[{key:"faceTo",value:function(t,e){var i=t-this.pos.x,n=e-this.pos.y;return this.angle=180*Math.atan2(n,i)/Math.PI,this}},{key:"draw",value:function(t){var e=this.pos.clone().move(y.fromPCS(this.size,this.angle));t.beginPath(),t.moveTo(this.pos.x,this.pos.y),t.lineTo(e.x,e.y),t.strokeStyle="#FFB266",t.lineWidth=this.size/3,t.stroke()}}]),t}(),j=k,C={name:"night-sky",props:{coefficients:Object},data:function(){return{canvasEl:null,ctx:null,fireworks:[],emitter:null}},methods:{setCanvas:function(){this.canvasEl=this.$refs["night-sky-canvas"],this.ctx=this.canvasEl.getContext("2d"),this.ctx.globalCompositeOperation="lighter",this.canvasEl.width=this.canvasEl.parentElement.clientWidth,this.canvasEl.height=this.canvasEl.parentElement.clientHeight},draw:function(){var t=this;window.requestAnimationFrame(this.draw),this.ctx.clearRect(0,0,this.cw,this.ch),this.fireworks.forEach((function(e){e.draw(t.ctx)})),this.emitter.draw(this.ctx)},update:function(){this.fireworks=this.fireworks.filter((function(t){return!t.isDiscard})),this.fireworks.forEach((function(t){t.update()}))},handleMouseMove:function(t){var e=t.clientX,i=t.clientY;this.emitter.faceTo(e,i)},handleMouseClick:function(t){var e=t.clientX,i=t.clientY,n=e-this.emitPos.x,s=i-this.emitPos.y,a=y.fromOffset(this.emitVel,n,s);this.fireworks.push(new x(this.emitPos,a,this.gravity,this.fragNum))}},mounted:function(){var t=this;this.setCanvas(),this.emitter=new j(this.emitPos,50),setInterval((function(){t.update(.03)}),1e3/30),window.requestAnimationFrame(this.draw)},computed:{cw:function(){return this.canvasEl.width},ch:function(){return this.canvasEl.height},emitPos:function(){return new f(this.canvasEl.width/2,this.canvasEl.height-30)},gravity:function(){return new y(0,this.coefficients.gravity)},emitVel:function(){return this.coefficients.emitVel},fragNum:function(){return this.coefficients.fragNum}}},P=C,M=(i("7ff5"),i("2877")),E=Object(M["a"])(P,o,c,!1,null,"8e40521c",null),_=E.exports,S=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"control-panel"},[i("p",{staticClass:"item-title"},[t._v("gravity: "+t._s(t.gravity))]),i("input",{staticClass:"slider",attrs:{type:"range",min:"0",max:"5",step:"0.5"},domProps:{value:t.gravity},on:{input:function(e){return e.preventDefault(),t.handleChangeCoef("gravity",e)}}}),i("div",{staticClass:"splitter"}),i("p",{staticClass:"item-title"},[t._v("initial speed: "+t._s(t.emitVel))]),i("input",{staticClass:"slider",attrs:{type:"range",min:"10",max:"100",step:"5"},domProps:{value:t.emitVel},on:{input:function(e){return e.preventDefault(),t.handleChangeCoef("emitVel",e)}}}),i("div",{staticClass:"splitter"}),i("p",{staticClass:"item-title"},[t._v("amount of fragments: "+t._s(t.fragNum))]),i("input",{staticClass:"slider",attrs:{type:"range",min:"10",max:"80",step:"5"},domProps:{value:t.fragNum},on:{input:function(e){return e.preventDefault(),t.handleChangeCoef("fragNum",e)}}}),i("div",{staticClass:"splitter"}),i("div",{staticClass:"splitter"}),i("button",{staticClass:"reset-btn",on:{click:function(e){return t.$emit("reset-coef")}}},[t._v("\n    RESET\n  ")])])},N=[],T={props:{coefficients:Object},computed:{gravity:function(){return this.coefficients.gravity},emitVel:function(){return this.coefficients.emitVel},fragNum:function(){return this.coefficients.fragNum}},methods:{handleChangeCoef:function(t,e){this.$emit("change-coef",t,parseFloat(e.target.value))}}},V=T,D=(i("61db"),Object(M["a"])(V,S,N,!1,null,"fe48fb78",null)),$=D.exports;function F(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function q(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?F(i,!0).forEach((function(e){Object(r["a"])(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):F(i).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var R={name:"app",components:{NightSky:_,ControlPanel:$},data:function(){return{coefficients:this.defaultCoef()}},methods:{defaultCoef:function(){return{gravity:1,emitVel:40,fragNum:40}},handleChangeCoef:function(t,e){this.coefficients=q({},this.coefficients,Object(r["a"])({},t,e))},handleResetCoef:function(){this.coefficients=this.defaultCoef()}}},z=R,I=(i("034f"),Object(M["a"])(z,s,a,!1,null,null,null)),W=I.exports;n["a"].config.productionTip=!1,new n["a"]({render:function(t){return t(W)}}).$mount("#app")},"5fee":function(t,e,i){},"61db":function(t,e,i){"use strict";var n=i("1794"),s=i.n(n);s.a},"64a9":function(t,e,i){},"7ff5":function(t,e,i){"use strict";var n=i("5fee"),s=i.n(n);s.a}});
//# sourceMappingURL=app.fcf90519.js.map