(function(t){function e(e){for(var n,a,o=e[0],c=e[1],u=e[2],l=0,f=[];l<o.length;l++)a=o[l],Object.prototype.hasOwnProperty.call(s,a)&&s[a]&&f.push(s[a][0]),s[a]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);h&&h(e);while(f.length)f.shift()();return r.push.apply(r,u||[]),i()}function i(){for(var t,e=0;e<r.length;e++){for(var i=r[e],n=!0,o=1;o<i.length;o++){var c=i[o];0!==s[c]&&(n=!1)}n&&(r.splice(e--,1),t=a(a.s=i[0]))}return t}var n={},s={app:0},r=[];function a(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,a),i.l=!0,i.exports}a.m=t,a.c=n,a.d=function(t,e,i){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)a.d(i,n,function(e){return t[e]}.bind(null,n));return i},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/web-firework-simulation/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var u=0;u<o.length;u++)e(o[u]);var h=c;r.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"034f":function(t,e,i){"use strict";var n=i("64a9"),s=i.n(n);s.a},"56d7":function(t,e,i){"use strict";i.r(e);i("cadf"),i("551c"),i("f751"),i("097d");var n=i("2b0e"),s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("night-sky",{attrs:{coefficients:t.coefficients,resizedTimes:t.resizedTimes,actionQueue:t.actionQueue},on:{clearQueue:t.handleClearQueue}}),i("control-panel",{attrs:{coefficients:t.coefficients},on:{"change-coef":t.handleChangeCoef,"reset-coef":t.handleResetCoef}}),t._m(0),i("resize-observer",{on:{notify:t.handleResize}})],1)},r=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("a",{staticClass:"github-link",attrs:{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/miksin/web-firework-simulation"}},[n("img",{attrs:{src:i("9298"),alt:"Github"}})])}],a=(i("8e6e"),i("ac6a"),i("456d"),i("75fc")),o=i("bd86"),c=i("252c"),u=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"canvas-container"},[i("canvas",{ref:"night-sky-canvas"},[t._v("\n    Not support canvas\n  ")])])},h=[],l=(i("c5f6"),i("d225")),f=i("b0b4"),p=function(){function t(e,i){Object(l["a"])(this,t),this.x=e,this.y=i}return Object(f["a"])(t,[{key:"valueOf",value:function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))}},{key:"toString",value:function(){return"(".concat(this.x,", ").concat(this.y,")")}},{key:"clone",value:function(){return Object.assign(Object.create(Object.getPrototypeOf(this)),this)}},{key:"move",value:function(t){return this.x+=t.x,this.y+=t.y,this}},{key:"bias",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,e=Math.random()*t-t,i=Math.random()*t-t;return this.x+=e,this.y+=i,this}},{key:"assign",set:function(t){this.x=t.x,this.y=t.y}}],[{key:"distance",value:function(t,e){var i=t.x-e.x,n=t.y-e.y;return Math.sqrt(Math.pow(i,2)+Math.pow(n,2))}}]),t}(),m=p,v=i("308d"),d=i("6bb5"),g=i("4e2b"),b=function(t){function e(){return Object(l["a"])(this,e),Object(v["a"])(this,Object(d["a"])(e).apply(this,arguments))}return Object(g["a"])(e,t),Object(f["a"])(e,[{key:"add",value:function(t){return this.x+=t.x,this.y+=t.y,this}},{key:"scale",value:function(t){return this.x*=t,this.y*=t,this}},{key:"length",get:function(){return this.valueOf()}}],[{key:"fromPCS",value:function(t,i){var n=Math.PI*(i/180),s=t*Math.cos(n),r=t*Math.sin(n);return new e(s,r)}},{key:"fromOffset",value:function(t,i,n){var s=Math.atan2(n,i);return new e(t*Math.cos(s),t*Math.sin(s))}}]),e}(m),y=b,w=(i("6c7b"),i("96cf"),i("3b8d"));function E(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Math.floor(Math.random()*(t-e)+e)}function A(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:768;return window.innerWidth<t}function k(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:947;return window.innerHeight/parseFloat(t)}function x(t){return O.apply(this,arguments)}function O(){return O=Object(w["a"])(regeneratorRuntime.mark((function t(e){var i,n=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=n.length>1&&void 0!==n[1]?n[1]:.6,t.abrupt("return",new Promise((function(t){setTimeout((function(){var n=E(e,1),s=new Array(n).fill(0).map((function(){return{ratio:Math.random()*(1-i)+i}}));t(s)}),0)})));case 2:case"end":return t.stop()}}),t)}))),O.apply(this,arguments)}var C=function(){function t(e,i,n,s){Object(l["a"])(this,t),this.oldPos=new m(e.x,e.y),this.pos=new m(e.x,e.y),this.vel=new y(i.x,i.y),this.acc=new y(n.x,n.y),this.radius=s,this.hue=E(360),this.saturation=100,this.lightness=50,this.alpha=.5}return Object(f["a"])(t,[{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.oldPos=this.pos.clone(),this.pos.move(this.vel.clone().scale(t)),this.vel.add(this.acc.clone().scale(t)),this.hue=(this.hue+10)%360}},{key:"draw",value:function(t){t.beginPath(),t.moveTo(this.oldPos.x,this.oldPos.y),t.lineTo(this.pos.x,this.pos.y),t.strokeStyle="hsla(".concat(this.hue,", ").concat(this.saturation,"%, ").concat(this.lightness,"%, ").concat(this.alpha,")"),t.lineWidth=this.radius,t.stroke()}}]),t}(),j=C,M=function(){function t(e,i,n){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:40;Object(l["a"])(this,t),this.particles=[],this.isExplode=!1,this.isDiscard=!1,this.emitTime=new Date,this.gravity=n,this.fragNum=s,this.emitVel=i.clone(),this.emitPos=e.clone(),this.particles.push(new j(this.emitPos,this.emitVel,n.clone(),3))}return Object(f["a"])(t,[{key:"draw",value:function(t){this.particles.forEach((function(e){e.draw(t)}))}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=new Date;if(!this.isExplode&&(this.particles[0].vel.y>0||e-this.emitTime>1500)){var i=this.particles[0].pos.clone();this.isExplode=!0,this.particles=[];for(var n=0;n<this.fragNum;n+=1){var s=y.fromPCS(E(this.emitVel.valueOf()-15,this.emitVel.valueOf()-30),E(0,360)),r=new j(i,s,this.gravity,2);this.particles.push(r)}}this.isExplode&&e-this.emitTime>5e3&&(this.isDiscard=!0,this.particles=[]),this.particles.forEach((function(e){e.update(t)}))}}]),t}(),T=M,P=function(){function t(e,i){Object(l["a"])(this,t),this.pos=e.clone(),this.angle=-90,this.size=i}return Object(f["a"])(t,[{key:"faceTo",value:function(t,e){var i=t-this.pos.x,n=e-this.pos.y;return this.angle=180*Math.atan2(n,i)/Math.PI,this}},{key:"draw",value:function(t){var e=this.pos.clone().move(y.fromPCS(this.size,this.angle));t.beginPath(),t.moveTo(this.pos.x,this.pos.y),t.lineTo(e.x,e.y),t.strokeStyle="#FFB266",t.lineWidth=this.size/3,t.stroke()}}]),t}(),D=P,B={name:"night-sky",props:{coefficients:Object,resizedTimes:Number,actionQueue:Array},data:function(){return{canvasEl:null,ctx:null,fireworks:[],emitters:[]}},methods:{setCanvas:function(){this.canvasEl=this.$refs["night-sky-canvas"],this.ctx=this.canvasEl.getContext("2d"),this.ctx.globalCompositeOperation="lighter",this.canvasEl.width=this.canvasEl.parentElement.clientWidth,this.canvasEl.height=this.canvasEl.parentElement.clientHeight},setEmitter:function(){this.emitters=[];for(var t=this.calEmitPositions(),e=0;e<this.numEmitter;e+=1)this.emitters.push(new D(t[e],50))},draw:function(){var t=this;window.requestAnimationFrame(this.draw),this.ctx.clearRect(0,0,this.canvasEl.width,this.canvasEl.height),this.fireworks.forEach((function(e){e.draw(t.ctx)})),this.emitters.forEach((function(e){e.draw(t.ctx)}))},update:function(){this.fireworks=this.fireworks.filter((function(t){return!t.isDiscard})),this.fireworks.forEach((function(t){t.update()}))},calEmitPositions:function(){for(var t=this.canvasEl.width/parseFloat(this.numEmitter),e=[],i=0;i<this.numEmitter;i+=1)e.push(new m((i+.5)*t,this.canvasEl.height-30));return e},handleEmit:function(t,e){var i=this.emitters[t].pos,n=this.emitVel*e,s=this.gravity.clone().scale(e),r=y.fromPCS(n,E(-85,-95));this.fireworks.push(new T(i,r,s,this.fragNum))},handleResize:function(){this.canvasEl.width=this.canvasEl.parentElement.clientWidth,this.canvasEl.height=this.canvasEl.parentElement.clientHeight,this.setEmitter()}},mounted:function(){var t=this;this.setCanvas(),this.setEmitter(),setInterval((function(){t.update(.03)}),1e3/30),window.requestAnimationFrame(this.draw)},computed:{gravity:function(){return new y(0,this.coefficients.gravity)},emitVel:function(){return this.coefficients.emitVel},fragNum:function(){return this.coefficients.fragNum},numEmitter:function(){return this.coefficients.numEmitter}},watch:{resizedTimes:function(){this.handleResize()},numEmitter:function(){this.setEmitter()},actionQueue:function(t){var e=this;t.length<1||(t.forEach((function(t){var i=t.ratio;e.handleEmit(E(e.numEmitter),i)})),this.$emit("clearQueue"))}}},I=B,Q=(i("cd69"),i("2877")),N=Object(Q["a"])(I,u,h,!1,null,"d1bef260",null),G=N.exports,J=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"control-panel"},[i("p",{staticClass:"item-title"},[t._v("gravity: "+t._s(parseFloat(t.gravity).toFixed(2)))]),i("input",{staticClass:"slider",attrs:{type:"range",min:"0",max:"5",step:"0.5"},domProps:{value:t.gravity},on:{input:function(e){return e.preventDefault(),t.handleChangeCoef("gravity",e)}}}),i("div",{staticClass:"splitter"}),i("p",{staticClass:"item-title"},[t._v("initial speed: "+t._s(parseFloat(t.emitVel).toFixed(2)))]),i("input",{staticClass:"slider",attrs:{type:"range",min:"10",max:"100",step:"5"},domProps:{value:t.emitVel},on:{input:function(e){return e.preventDefault(),t.handleChangeCoef("emitVel",e)}}}),i("div",{staticClass:"splitter"}),i("p",{staticClass:"item-title"},[t._v("amount of fragments: "+t._s(t.fragNum))]),i("input",{staticClass:"slider",attrs:{type:"range",min:"10",max:"80",step:"5"},domProps:{value:t.fragNum},on:{input:function(e){return e.preventDefault(),t.handleChangeCoef("fragNum",e)}}}),i("div",{staticClass:"splitter"}),i("p",{staticClass:"item-title"},[t._v("emitters: "+t._s(t.numEmitter))]),i("input",{staticClass:"slider",attrs:{type:"range",min:"1",max:"10",step:"1"},domProps:{value:t.numEmitter},on:{input:function(e){return e.preventDefault(),t.handleChangeCoef("numEmitter",e)}}}),i("div",{staticClass:"splitter"}),i("div",{staticClass:"splitter"}),i("button",{staticClass:"reset-btn",on:{click:function(e){return t.$emit("reset-coef")}}},[t._v("\n    RESET\n  ")])])},R=[],F={props:{coefficients:Object},computed:{gravity:function(){return this.coefficients.gravity},emitVel:function(){return this.coefficients.emitVel},fragNum:function(){return this.coefficients.fragNum},numEmitter:function(){return this.coefficients.numEmitter}},methods:{handleChangeCoef:function(t,e){this.$emit("change-coef",t,parseFloat(e.target.value))}}},z=F,S=(i("59be"),Object(Q["a"])(z,J,R,!1,null,"6c53e1a4",null)),Y=S.exports;i("6eb0");function V(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function W(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?V(i,!0).forEach((function(e){Object(o["a"])(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):V(i).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var Z={name:"app",components:{NightSky:G,ControlPanel:Y,ResizeObserver:c["a"]},data:function(){return{coefficients:this.defaultCoef(k()),actionQueue:[],resizeTimer:null,resizedTimes:0}},methods:{defaultCoef:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=A()?1:3;return{gravity:1*t,emitVel:40*t,fragNum:60*t,numEmitter:e}},handleChangeCoef:function(t,e){this.coefficients=W({},this.coefficients,Object(o["a"])({},t,e))},handleResetCoef:function(){this.coefficients=this.defaultCoef(k())},handleResize:function(){var t=this;clearTimeout(this.resizeTimer),this.resizeTimer=setTimeout((function(){t.resizedTimes+=1,t.coefficients=t.defaultCoef(k())}),500)},handleEnqueue:function(t){var e;(e=this.actionQueue).push.apply(e,Object(a["a"])(t))},handleClearQueue:function(){this.actionQueue=[]}},mounted:function(){var t=this;setInterval((function(){var e=t.coefficients.numEmitter;x(e+1).then((function(e){return t.handleEnqueue(e)}))}),2e3)}},U=Z,H=(i("034f"),Object(Q["a"])(U,s,r,!1,null,null,null)),L=H.exports;n["a"].config.productionTip=!1,new n["a"]({render:function(t){return t(L)}}).$mount("#app")},"59be":function(t,e,i){"use strict";var n=i("91dd"),s=i.n(n);s.a},"64a9":function(t,e,i){},"91dd":function(t,e,i){},9298:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NDkxMSwgMjAxMy8xMC8yOS0xMTo0NzoxNiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MzlFQkFERkU4NkJCMTFFM0FBNTJFRTMzNTJEMUJDNDYiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MzlFQkFERkQ4NkJCMTFFM0FBNTJFRTMzNTJEMUJDNDYiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkU1MTc4QTJFOTlBMDExRTI5QTE1QkMxMDQ2QTg5MDREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkU1MTc4QTJGOTlBMDExRTI5QTE1QkMxMDQ2QTg5MDREIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Kk5lQwAABYxJREFUeNrkm29oVXUYx3+7bM3V1FnbqlltrtXWtYRa1nqxooY5E7EhKWGuaTDBagol9SIMDCKICASj+cISw/DPi16ZBakrUBnoC7nNoTMWy6I1c+LmVq6t78N9jpyu555znt855+536IHPi939/jzP95zznN+/kzc1NaUitirwJJgPasF94DZQDG7hMqNgBFwEZ5kU+AH0R+lcXgQCJMBT4EXwLKgM2N7P4FvwJegCk6YKUA5eB23grogu2C/gc7AN/GGKABTsZtAOZqjc2DjYAT5kUfSNBNCkAGwGo1PTZ6PsQ4FuHLp3QD3YDR5QZtgZsAac1ElYokcGbATHDApesS/kUwf7GEkOKAK7wAvKbNsPXgZjYQowG3wNnlDxsONgCbgchgAU/GHwiIqXUT5o8hLBKwfcDA7FMHgrUR/iGLQEoGTyBWhQ8bUGjiFPR4A3QIuKv7VwLKIcQMnue5Dv0fjT/IwtAM3g+RyMBmkU+BXf3qc5Rx3xqDPBE7LjfkaCheCcj1HYKYe6JeBt8GcEo75L3HaJQ7+nfNQ/x7H9p67TFX4L1Pi4EocdfhsGH4BPwVbwqu0xGwI/8vT2N/77Gv+vAJSCO3n6PJ//Vjz72w62cPtORnfAwx7+1nBsW93ugGow7vOKtPkYa9eDl0Clxji9kuvW+yjb5tPncY7xet3MhjoFt2RzgIlU2DQL/O6017W/Be4BawXJqMCgTH+ToOxajvWG1+AmYVBlBglQKrxwmzIFoB9XCzt91CABpL6sti62JcBiXtKS2GMGCSD1pZxjvi7AKmED9PraYJAAG2yvVL+2yi7AImHl90C3QQJ03/B+97ZF1lCYVlN6BBV/BffykNQkoyF4H5grqJOkO6BR2NF2A4O35gifCOs0JjTW9vYaPPPbJ11LJAFqBRVoDf68wQLQI3BBUL424XPiY1lvDOb/ZwRla0iAOYIKv8dAgEFB2VtJgJmCChMxEEAyHigmAQoFFWbFQIDZgrKF0p2hmTEQQOQjCTAmKD8vBgJUCcqOkQBXBBXosEORwcEXKdmBjCskwICgQr5h0+BMW6i8V7LtNkAC9As7WWqwAM8Jy/cnhBMhspVKvq2eC0uwbxLrSWhMa+dpdJQLW6mRpLtpOlyuMcL7CTwErhoSPG2ApjQEuD3BQ0fp0ZJqlT6pZYpt0wieYh60nuWDGp2+At4xIPgt7IvU0jHzBkFdgD27HWDGNGyGFHHfulaXuTN0IkBjZ8EykJeDwKmPFtAXwN8TTltjrVkKfwcawXJW3G3v8DTYCKoiCLwGvAl6QthpbnU6J5jP2f1uh1Wgxbbxwv0qvT/vtZRGA6wuzs50+Pkb8JdgQtPMq1VJld7bnxtSzhjgJD5hzwEW611OZK6xlSvzeYbAsl3Cx4PK7ozodOl6t93hfJByqbzOVnYh+MdHhxfBLI1bnuoMhRx8imPMKgDR5LG/nrSVfddHpx8HeO4/ClmApsw+snXsdk7gYMat+r5Hp0sDCLAkxOA7nfrI1nGxx2tmQUb5x8FuzgvD4Dw4wNm2MIAA1SEF38cx+RaAeBCMZGlwb44GOyUhBD/CsTj24TatpddXq3L+RIVmXnE4QzjJMaSylvBxFdqzKHsVrDD8Dmj36sOvIx0unewHDRENg4MI0BH2FyP0RcZOlzW3Ib7VLvPqDK0z1PEq7bDmLVwCLgnr0AhvnUp/0eJp0k9m6HO4fUp2nGZODgUY5PzUJVlHkxg1TEfnjxqY8I6yb12SSjqLm7T9/Ax4TaW/+JxuIx862KcL4toBk1QFT1omXZLRHQHaL3Npl/r8jH3QjiGsbJ3kGd/fDo6WBWi31KG9a9xXMgzfw35tVfCR9l52dk8Ibe7htnq57YowfY7i4+lYWUL9z+1fAQYACqstE4NCc18AAAAASUVORK5CYII="},c10d:function(t,e,i){},cd69:function(t,e,i){"use strict";var n=i("c10d"),s=i.n(n);s.a}});
//# sourceMappingURL=app.a6c9ea66.js.map